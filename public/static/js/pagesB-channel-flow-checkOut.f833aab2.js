(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesB-channel-flow-checkOut"],{"2aec":function(e,t,i){"use strict";var a=i("6aa7"),s=i.n(a);s.a},4498:function(e,t,i){"use strict";var a=i("4ea4");i("4160"),i("b680"),i("acd8"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var s=a(i("1da1")),c={data:function(){return{shipping_fee_ing:1,baseUrl:this.config.baseUrl,isLoading:!1,desc:"",address_id:0,addressData:{},purchaseType:0,rec_id:"",cartList:[],goods_total:0,shipping_fee:0,order_total:0}},onLoad:function(e){if(e.purchaseType<0||e.purchaseType>3)return uni.showModal({title:"提示",content:"进货类型错误.",showCancel:!1,success:function(e){e.confirm&&uni.switchTab({url:"/pagesB/channel/center/index"})}}),!1;this.purchaseType=e.purchaseType,this.rec_id=e.rec_id,this.purchaseType>1&&this.getAddress(),this.loadData()},methods:{loadData:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$u.post("channel/api.flow/getCartList",{purchaseType:e.purchaseType,is_select:1,rec_id:e.rec_id}).then((function(t){if(t.data.cartList.length<1)return uni.showModal({title:"提示",content:"没找到相关商品信息.",showCancel:!1,success:function(e){e.confirm&&uni.navigateBack()}}),!1;e.cartList=t.data.cartList,e.calcTotal()}));case 1:case"end":return t.stop()}}),t)})))()},getAddress:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=uni.getStorageSync("address_id"),e.$u.post("member/api.address/getAddress",{address_id:i}).then((function(t){e.addressData=t.data,e.addressData.address_id>0?e.address_id=e.addressData.address_id:e.address_id=0,e.evalShippingFee()}));case 2:case"end":return t.stop()}}),t)})))()},evalShippingFee:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i={},i.purchaseType=e.purchaseType,i.address_id=e.address_id,i.rec_id=e.rec_id,e.shipping_fee_ing=1,e.$u.post("channel/api.flow/evalShippingFee",i).then((function(t){e.shipping_fee_ing=0,e.shipping_fee=t.data.shippingFee.shipping_fee,e.calcTotal()}));case 6:case"end":return t.stop()}}),t)})))()},calcTotal:function(){var e=0;this.cartList.forEach((function(t){e+=t.sale_price*(t.goods_number*t.convert_unit_val)})),this.goods_total=e.toFixed(2),3==this.purchaseType?this.order_total=this.shipping_fee:(e=parseFloat(e)+parseFloat(this.shipping_fee),this.order_total=e.toFixed(2))},submit:function(){var e=this;if(1==this.isLoading)return!1;var t={};if(t.purchaseType=this.purchaseType,1!=t.purchaseType){if(this.address_id<1)return uni.showToast({title:"请选择收货地址.",duration:2e3,icon:"none"}),!1;t.address_id=this.address_id}t.is_select=1,t.rec_id=this.rec_id,t.buyer_message=this.desc,this.isLoading=!0,this.$u.post("channel/api.flow/addOrder",t).then((function(t){var i=t.data.order_id;3==e.purchaseType?uni.redirectTo({url:"/pagesB/channel/order/info?order_id=".concat(i)}):uni.redirectTo({url:"/pagesB/channel/order/pay?order_id=".concat(i)})})).catch((function(t){e.isLoading=!1}))},stopPrevent:function(){}}};t.default=c},"58e5":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */\r\n/* 页面左右间距 */\r\n/* 文字尺寸 */\r\n/* 边框颜色 */\r\n/* 图片加载中颜色 */\r\n/* 行为相关颜色 */\r\n/*文字颜色*/uni-page-body[data-v-45c670c2]{background:#f8f8f8;padding-bottom:%?100?%}.purchase_box[data-v-45c670c2]{background-color:#fff;padding:%?20?%;margin-bottom:%?20?%}.purchase_box .type[data-v-45c670c2]{background-color:#000;width:%?180?%;color:#fff;padding-left:%?50?%;background-image:url(/pagesB/static/channel/images/icon_purchase.png);background-size:%?25?%;background-repeat:no-repeat;background-position:%?10?% 50%;border-radius:%?10?%;font-size:%?26?%;line-height:%?50?%}.purchase_box .tip[data-v-45c670c2]{display:block;color:#999;font-size:%?20?%}.address-section[data-v-45c670c2]{padding:%?30?% 0;background:#fff;position:relative}.address-section .empty-address[data-v-45c670c2]{text-align:center;line-height:%?80?%;font-size:%?32?%}.address-section .address-content[data-v-45c670c2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.address-section .icon-shouhuodizhi[data-v-45c670c2]{-webkit-flex-shrink:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:%?90?%;color:#888;font-size:%?44?%}.address-section .cen[data-v-45c670c2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#333}.address-section .name[data-v-45c670c2]{font-size:%?34?%;margin-right:%?24?%}.address-section .address[data-v-45c670c2]{margin-top:%?16?%;margin-right:%?20?%;color:#999}.address-section .icon-you[data-v-45c670c2]{font-size:%?32?%;color:#999;margin-right:%?30?%}.address-section .arrow-right[data-v-45c670c2]{position:absolute;right:%?10?%;top:40%}.goods-section[data-v-45c670c2]{margin-top:%?16?%;padding-top:%?10?%;background:#fff;padding-bottom:1px}.goods-section .g-header[data-v-45c670c2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?84?%;padding:0 %?30?%;position:relative}.goods-section .logo[data-v-45c670c2]{display:block;width:%?50?%;height:%?50?%;border-radius:100px}.goods-section .name[data-v-45c670c2]{font-size:%?30?%;color:#3b7bf6;margin-left:%?24?%}.goods-section .g-item[data-v-45c670c2]{display:-webkit-box;display:-webkit-flex;display:flex;margin:%?20?% %?30?%}.goods-section .g-item uni-image[data-v-45c670c2]{-webkit-flex-shrink:0;flex-shrink:0;display:block;width:%?140?%;height:%?140?%;border-radius:%?4?%}.goods-section .g-item .right[data-v-45c670c2]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding-left:%?24?%;overflow:hidden}.goods-section .g-item .title[data-v-45c670c2]{display:block;font-size:%?30?%;color:#333;height:%?100?%;line-height:%?36?%}.goods-section .g-item .spec[data-v-45c670c2]{font-size:%?26?%;color:#999}.goods-section .g-item .price-box[data-v-45c670c2]{float:right;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?30?%;color:#333;padding-top:%?10?%}.goods-section .g-item .price-box .price[data-v-45c670c2]{margin-bottom:%?4?%}.goods-section .g-item .price-box .number[data-v-45c670c2]{font-size:%?26?%;color:#3b7bf6;margin-left:%?20?%}.goods-section .g-item .step-box[data-v-45c670c2]{position:relative}.yt-list[data-v-45c670c2]{margin-top:%?16?%;background:#fff}.yt-list-cell[data-v-45c670c2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?10?% %?30?% %?10?% %?40?%;line-height:%?70?%;position:relative}.yt-list-cell.cell-hover[data-v-45c670c2]{background:#fafafa}.yt-list-cell.b-b[data-v-45c670c2]:after{left:%?30?%}.yt-list-cell .cell-icon[data-v-45c670c2]{height:%?32?%;width:%?32?%;font-size:%?22?%;color:#fff;text-align:center;line-height:%?32?%;background:#f85e52;border-radius:%?4?%;margin-right:%?12?%}.yt-list-cell .cell-icon.hb[data-v-45c670c2]{background:#ffaa0e}.yt-list-cell .cell-icon.lpk[data-v-45c670c2]{background:#3ab54a}.yt-list-cell .cell-more[data-v-45c670c2]{-webkit-align-self:center;align-self:center;font-size:%?24?%;color:#999;margin-left:%?8?%;margin-right:%?-10?%}.yt-list-cell .cell-tit[data-v-45c670c2]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?26?%;color:#999;margin-right:%?10?%}.yt-list-cell .cell-tip[data-v-45c670c2]{font-size:%?26?%;color:#333}.yt-list-cell .cell-tip.disabled[data-v-45c670c2]{color:#999}.yt-list-cell .cell-tip.active[data-v-45c670c2]{color:#3b7bf6}.yt-list-cell .cell-tip.red[data-v-45c670c2]{color:#3b7bf6}.yt-list-cell.desc-cell .cell-tit[data-v-45c670c2]{max-width:%?90?%}.yt-list-cell .desc[data-v-45c670c2]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#333}.footer[data-v-45c670c2]{position:fixed;left:0;bottom:0;z-index:995;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%;height:%?90?%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:%?30?%;background-color:#fff;z-index:998;color:#3b7bf6;-webkit-box-shadow:0 -1px 5px rgba(0,0,0,.1);box-shadow:0 -1px 5px rgba(0,0,0,.1)}.footer .price-content[data-v-45c670c2]{padding-left:%?30?%}.footer .price-tip[data-v-45c670c2]{color:#3b7bf6;margin-left:%?8?%}.footer .price[data-v-45c670c2]{font-size:%?36?%;color:#3b7bf6}.footer .submit[data-v-45c670c2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:%?280?%;height:100%;color:#fff;font-size:%?32?%;background-color:#3b7bf6}body.?%PAGE?%[data-v-45c670c2]{background:#f8f8f8}',""]),e.exports=t},"5d81":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return c})),i.d(t,"a",(function(){return a}));var a={uIcon:i("c688").default},s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"page-body"},[1==e.purchaseType?i("v-uni-view",{staticClass:"purchase_box"},[i("v-uni-view",{staticClass:"type"},[e._v("云仓订单")]),i("v-uni-text",{staticClass:"tip mt20"},[e._v("当前您选择的产品订单结算后将以托管的方式存放到品牌仓库")])],1):i("v-uni-view",{staticClass:"purchase_box"},[i("v-uni-view",{staticClass:"type"},[e._v(e._s(2==e.purchaseType?"现货订单":"提货订单"))]),i("v-uni-text",{staticClass:"tip mt20"},[e._v("当前您选择的产品将以发货的方式送达，请留意订单的发货状态")])],1),1!=e.purchaseType?i("v-uni-view",[e.addressData.address_id>0?i("v-uni-view",[i("v-uni-navigator",{staticClass:"address-section",attrs:{url:"/pages/member/address/list?source=1&from=channel"}},[i("v-uni-view",{staticClass:"address-content"},[i("u-icon",{staticClass:"ml20 mr20",attrs:{name:"map",color:"#ccc",size:"52"}}),i("v-uni-view",{staticClass:"cen"},[i("v-uni-view",{staticClass:"top"},[i("v-uni-text",{staticClass:"name"},[e._v(e._s(e.addressData.consignee))]),i("v-uni-text",{staticClass:"mobile"},[e._v(e._s(e.addressData.mobile))])],1),i("v-uni-text",{staticClass:"address"},[e._v(e._s(e.addressData.merger_name)+" "+e._s(e.addressData.address))])],1),i("u-icon",{staticClass:"arrow-right",attrs:{name:"arrow-right",color:"#ccc",size:"42"}})],1)],1)],1):i("v-uni-view",[i("v-uni-navigator",{staticClass:"address-section",attrs:{url:"/pages/member/address/manage?source=1&from=channel"}},[i("v-uni-view",{staticClass:"empty-address"},[e._v("添加收货地址"),i("u-icon",{attrs:{name:"arrow-right-double"}})],1)],1)],1)],1):e._e(),i("v-uni-view",{staticClass:"goods-section"},e._l(e.cartList,(function(t,a){return i("v-uni-view",{key:t.rec_id,staticClass:"g-item"},[i("v-uni-image",{attrs:{src:e.baseUrl+t.pic}}),i("v-uni-view",{staticClass:"right"},[i("v-uni-text",{staticClass:"title clamp"},[e._v(e._s(t.goods_name))]),i("v-uni-text",{staticClass:"spec"},[e._v(e._s(t.sku_name))]),i("v-uni-view",{staticClass:"price-box"},[i("v-uni-text",{staticClass:"price"},[e._v("￥"+e._s(t.sale_price))]),i("v-uni-text",{staticClass:"number"},[e._v("x "+e._s(t.goods_number)+e._s(t.goods_unit_name))])],1)],1)],1)})),1),i("v-uni-view",{staticClass:"yt-list"},[i("v-uni-view",{staticClass:"yt-list-cell b-b"},[i("v-uni-text",{staticClass:"cell-tit clamp"},[e._v("商品金额")]),i("v-uni-text",{staticClass:"cell-tip"},[e._v("￥"+e._s(e.goods_total))])],1),1!=e.purchaseType?i("v-uni-view",{staticClass:"yt-list-cell b-b"},[i("v-uni-text",{staticClass:"cell-tit clamp"},[e._v("运费")]),0==e.shipping_fee_ing?i("v-uni-text",{staticClass:"cell-tip color-baseb"},[e._v("￥"+e._s(e.shipping_fee))]):i("v-uni-text",{staticClass:"cell-tip color-baseb"},[e._v("运费计算中...")])],1):e._e(),1!=e.purchaseType?i("v-uni-view",{staticClass:"yt-list-cell desc-cell"},[i("v-uni-text",{staticClass:"cell-tit clamp"},[e._v("备注")]),i("v-uni-input",{staticClass:"desc",attrs:{type:"text",placeholder:"建议备注前与供货方沟通确认","placeholder-class":"placeholder"},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}})],1):e._e()],1),i("v-uni-view",{staticClass:"footer"},[i("v-uni-view",{staticClass:"price-content"},[i("v-uni-text",[e._v("实付款")]),i("v-uni-text",{staticClass:"price-tip"},[e._v("￥")]),i("v-uni-text",{staticClass:"price"},[e._v(e._s(e.order_total))])],1),i("v-uni-text",{staticClass:"submit",attrs:{loading:e.isLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("提交订单")])],1)],1)},c=[]},"6aa7":function(e,t,i){var a=i("58e5");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("4f06").default;s("e8ae9d62",a,!0,{sourceMap:!1,shadowMode:!1})},"9d0c":function(e,t,i){"use strict";i.r(t);var a=i("5d81"),s=i("e672");for(var c in s)"default"!==c&&function(e){i.d(t,e,(function(){return s[e]}))}(c);i("2aec");var n,r=i("f0c5"),o=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"45c670c2",null,!1,a["a"],n);t["default"]=o.exports},e672:function(e,t,i){"use strict";i.r(t);var a=i("4498"),s=i.n(a);for(var c in a)"default"!==c&&function(e){i.d(t,e,(function(){return a[e]}))}(c);t["default"]=s.a}}]);