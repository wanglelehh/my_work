(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-aftersale-apply"],{1321:function(t,e,i){var n=i("c30d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("24c83cda",n,!0,{sourceMap:!1,shadowMode:!1})},"2a73":function(t,e,i){"use strict";var n=i("1321"),a=i.n(n);a.a},"428e":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={uIcon:i("c688").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-numberbox"},[i("v-uni-view",{staticClass:"u-icon-minus",class:{"u-icon-disabled":t.disabled||t.inputVal<=t.min},style:{background:t.bgColor,height:t.inputHeight+"rpx",color:t.color},on:{touchstart:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.btnTouchStart("minus")},touchend:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clearTimer.apply(void 0,arguments)}}},[i("u-icon",{attrs:{name:"minus",size:t.size}})],1),i("v-uni-input",{staticClass:"u-number-input",class:{"u-input-disabled":t.disabled},style:{color:t.color,fontSize:t.size+"rpx",background:t.bgColor,height:t.inputHeight+"rpx",width:t.inputWidth+"rpx"},attrs:{disabled:t.disabledInput||t.disabled,"cursor-spacing":t.getCursorSpacing,type:"number"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur.apply(void 0,arguments)}},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}}),i("v-uni-view",{staticClass:"u-icon-plus",class:{"u-icon-disabled":t.disabled||t.inputVal>=t.max},style:{background:t.bgColor,height:t.inputHeight+"rpx",color:t.color},on:{touchstart:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.btnTouchStart("plus")},touchend:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clearTimer.apply(void 0,arguments)}}},[i("u-icon",{attrs:{name:"plus",size:t.size}})],1)],1)},s=[]},"5ae8":function(t,e,i){"use strict";i("a9e3"),i("b680"),i("d3b7"),i("ac1f"),i("25f0"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"u-number-box",props:{value:{type:Number,default:1},bgColor:{type:String,default:"#F2F3F5"},min:{type:Number,default:0},max:{type:Number,default:99999},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},size:{type:[Number,String],default:26},color:{type:String,default:"#323233"},inputWidth:{type:[Number,String],default:80},inputHeight:{type:[Number,String],default:50},index:{type:[Number,String],default:""},disabledInput:{type:Boolean,default:!1},cursorSpacing:{type:[Number,String],default:100},longPress:{type:Boolean,default:!0},pressTime:{type:[Number,String],default:250}},watch:{value:function(t,e){Number(t)!=this.inputVal&&(this.inputVal=Number(t))},inputVal:function(t,e){var i=this;if(""!=t){var n=0,a=this.$u.test.number(t);n=a&&t>=this.min&&t<=this.max?t:e,this.handleChange(n,"change"),this.$nextTick((function(){i.inputVal=t}))}}},data:function(){return{inputVal:1,timer:null}},created:function(){this.inputVal=Number(this.value)},computed:{getCursorSpacing:function(){return Number(uni.upx2px(this.cursorSpacing))}},methods:{btnTouchStart:function(t){var e=this;this[t](),this.longPress&&(clearInterval(this.timer),this.timer=null,this.timer=setInterval((function(){e[t]()}),this.pressTime))},clearTimer:function(){var t=this;this.$nextTick((function(){clearInterval(t.timer),t.timer=null}))},minus:function(){this.computeVal("minus")},plus:function(){this.computeVal("plus")},calcPlus:function(t,e){var i,n,a;try{n=t.toString().split(".")[1].length}catch(r){n=0}try{a=e.toString().split(".")[1].length}catch(r){a=0}i=Math.pow(10,Math.max(n,a));var s=n>=a?n:a;return((t*i+e*i)/i).toFixed(s)},calcMinus:function(t,e){var i,n,a;try{n=t.toString().split(".")[1].length}catch(r){n=0}try{a=e.toString().split(".")[1].length}catch(r){a=0}i=Math.pow(10,Math.max(n,a));var s=n>=a?n:a;return((t*i-e*i)/i).toFixed(s)},computeVal:function(t){if(uni.hideKeyboard(),!this.disabled){var e=0;"minus"===t?e=this.calcMinus(this.inputVal,this.step):"plus"===t&&(e=this.calcPlus(this.inputVal,this.step)),e<this.min||e>this.max||(this.inputVal=e,this.handleChange(e,t))}},onBlur:function(t){var e=this,i=0,n=t.detail.value;/(^\d+$)/.test(n)&&0!=n[0]||(i=this.min),i=+n,i>this.max?i=this.max:i<this.min&&(i=this.min),this.$nextTick((function(){e.inputVal=i})),this.handleChange(i,"blur")},handleChange:function(t,e){this.disabled||(this.$emit("input",Number(t)),this.$emit(e,{value:Number(t),index:this.index}))}}};e.default=n},6049:function(t,e,i){var n=i("846c");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("4e60ea8a",n,!0,{sourceMap:!1,shadowMode:!1})},"644d":function(t,e,i){"use strict";i("a15b"),i("a434"),i("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{isLoading:!1,showPage:!1,goodsImage:"",selectClass:"border-color base-color",upAction:this.config.upImageUrl,fileList:[],rec_id:0,orderGoods:{},aftersale_number:1,aftersaleType:0,return_money:"0.00",return_desc:""}},onLoad:function(t){this.app.isLogin(this);var e=this.app.langReplace("申请售后");uni.setNavigationBarTitle({title:e});var i=parseInt(t.rec_id);if(1==isNaN(i)||i<1)return this.app.showModal("传值错误.",-1),!1;this.rec_id=t.rec_id,this.getInfo()},onShow:function(){},methods:{getInfo:function(){var t=this;this.$u.post("shop/api.after_sale/orderGoods",{rec_id:this.rec_id}).then((function(e){t.orderGoods=e.data,t.goodsImage=t.config.baseUrl+t.orderGoods.pic,t.showPage=!0})).catch((function(e){t.app.showModal(e.msg,-1)}))},setAftersaleType:function(t){this.aftersaleType=t,this.evalReturnMoney()},numberChange:function(t){this.aftersale_number=t.value,this.evalReturnMoney()},evalReturnMoney:function(){if(2==this.aftersaleType)return this.return_money="0.00",!1;var t=this.orderGoods.sale_price*this.orderGoods.return_num;if(this.aftersale_number==this.orderGoods.return_num)return this.return_money=t-this.orderGoods.last_bonus_price-this.orderGoods.last_discount,!1;var e=this.aftersale_number*this.orderGoods.one_bonus_price,i=this.aftersale_number*this.orderGoods.one_discount;this.return_money=t-e-i},uploaded:function(t,e,i){t=JSON.parse(t.data);this.fileList.push(t.file)},removeImg:function(t,e){var i=this.fileList[t];this.fileList.splice(t,1),this.$u.post(this.config.removeImageUrl,{file:i}).then((function(t){}))},postApply:function(){var t=this;if(1==this.isLoading)return!1;if(this.aftersaleType<1)return this.$u.toast("请选择售后类型");this.isLoading=!0;var e={};e.rec_id=this.rec_id,e.type=this.aftersaleType,e.goods_number=this.aftersale_number,e.return_desc=this.return_desc,e.fileList=this.fileList.join(","),this.$u.post("shop/api.after_sale/add",e).then((function(e){t.isLoading=!1,t.app.showModal(e.msg,"index",-1)})).catch((function(e){t.isLoading=!1}))}}};e.default=n},"6d16":function(t,e,i){"use strict";i.r(e);var n=i("644d"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"72b3":function(t,e,i){"use strict";i.r(e);var n=i("5ae8"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"846c":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */\r\n/* 页面左右间距 */\r\n/* 文字尺寸 */\r\n/* 边框颜色 */\r\n/* 图片加载中颜色 */\r\n/* 行为相关颜色 */\r\n/*文字颜色*/.u-numberbox[data-v-5323c6bf]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.u-number-input[data-v-5323c6bf]{position:relative;text-align:center;padding:0;margin:0 %?6?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.u-icon-plus[data-v-5323c6bf],\r\n.u-icon-minus[data-v-5323c6bf]{width:%?60?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.u-icon-plus[data-v-5323c6bf]{border-radius:0 %?8?% %?8?% 0}.u-icon-minus[data-v-5323c6bf]{border-radius:%?8?% 0 0 %?8?%}.u-icon-disabled[data-v-5323c6bf]{color:#c8c9cc!important;background:#f7f8fa!important}.u-input-disabled[data-v-5323c6bf]{color:#c8c9cc!important;background-color:#f2f3f5!important}',""]),t.exports=e},"8ba8":function(t,e,i){"use strict";var n=i("6049"),a=i.n(n);a.a},"8f30":function(t,e,i){"use strict";i.r(e);var n=i("d364"),a=i("6d16");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("2a73");var r,o=i("f0c5"),u=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"12e849d6",null,!1,n["a"],r);e["default"]=u.exports},c30d:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".goods_name[data-v-12e849d6]{display:block;font-size:%?28?%;color:$font-color-dark;line-height:%?45?%;height:%?90?%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}",""]),t.exports=e},d364:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={uNumberBox:i("f5ff").default,uUpload:i("c374").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 1==t.showPage?i("v-uni-view",{staticClass:"page-body",class:[t.app.setCStyle()]},[i("v-uni-view",{staticClass:" p20 bg-white fs28"},[i("v-uni-view",{staticClass:"flex"},[i("v-uni-image",{staticStyle:{width:"140rpx",height:"140rpx"},attrs:{src:t.goodsImage}}),i("v-uni-view",{staticClass:"flex_bd ml20"},[i("v-uni-view",{staticClass:"flex"},[i("v-uni-view",{staticClass:"goods_name flex_bd"},[t._v(t._s(t.orderGoods.goods_name))]),i("v-uni-view",{staticClass:"ml10"},[i("v-uni-view",[i("v-uni-text",{staticClass:"fs22"},[t._v("￥")]),t._v(t._s(t.orderGoods.sale_price))],1),i("v-uni-view",{staticClass:"text-right color-99"},[t._v("x"+t._s(t.orderGoods.goods_number))])],1)],1),i("v-uni-view",{staticClass:"flex mt10"},[t.orderGoods.sku_id>0?i("v-uni-view",{staticClass:"color-cc fs26"},[t._v(t._s(t.orderGoods.sku_name))]):t._e()],1)],1)],1),i("v-uni-view",{staticClass:"mt20 flex"},[i("v-uni-view",{staticClass:"flex_bd"},[t._v(t._s(t.app.langReplace("申请售后商品数量")))]),i("v-uni-view",[i("u-number-box",{staticClass:"number-box",attrs:{"long-press":!1,value:t.aftersale_number,min:1,step:1,max:t.orderGoods.return_num},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.numberChange.apply(void 0,arguments)}}})],1)],1)],1),i("v-uni-view",{staticClass:"mt20 p20 bg-white"},[i("v-uni-view",{staticClass:"fs30"},[t._v(t._s(t.app.langReplace("服务类型")))]),i("v-uni-view",{staticClass:"flex mt20 fs30 text-center"},[i("v-uni-view",{staticClass:"flex_bd mlr10 b-allcc br20",class:1==t.aftersaleType?t.selectClass:"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setAftersaleType(1)}}},[t._v(t._s(t.app.langReplace("退货")))]),i("v-uni-view",{staticClass:"flex_bd mlr10 b-allcc br20",class:2==t.aftersaleType?t.selectClass:"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setAftersaleType(2)}}},[t._v(t._s(t.app.langReplace("换货")))])],1)],1),i("v-uni-view",{staticClass:"mt20 p20 bg-white "},[i("v-uni-view",{staticClass:"color-99 fs28"},[t._v("* "+t._s(t.app.langReplace("退款金额将扣除相关优惠金额，如果问题请联系客服")))]),i("v-uni-view",{staticClass:"flex mt10"},[i("v-uni-view",{staticClass:"flex_bd fs28"},[t._v(t._s(t.app.langReplace("退款金额")))]),i("v-uni-view",[i("v-uni-text",{staticClass:"fs24"},[t._v("￥")]),t._v(t._s(t.return_money))],1)],1)],1),i("v-uni-view",{staticClass:"mt20 p20 bg-white flex fs28"},[i("v-uni-view",[i("v-uni-view",{staticStyle:{width:"140rpx"}},[t._v(t._s(t.app.langReplace("售后原因")))])],1),i("v-uni-view",{staticClass:"flex_bd"},[i("v-uni-textarea",{attrs:{"placeholder-style":"color:#cccccc;font-size:28rpx;","auto-height":!0,placeholder:t.app.langReplace("请描述一下售后原因")},model:{value:t.return_desc,callback:function(e){t.return_desc=e},expression:"return_desc"}})],1)],1),i("v-uni-view",{staticClass:"bg-white p20 mt20"},[i("v-uni-view",{staticClass:"fs30"},[t._v(t._s(t.app.langReplace("上传图片")))]),i("v-uni-view",{staticClass:"mt20"},[i("u-upload",{ref:"upload",attrs:{action:t.upAction,"max-count":"6"},on:{"on-change":function(e){arguments[0]=e=t.$handleEvent(e),t.uploaded.apply(void 0,arguments)},"on-remove":function(e){arguments[0]=e=t.$handleEvent(e),t.removeImg.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"p20 mt20"},[i("v-uni-button",{staticClass:"primarybtn mt20",attrs:{type:"warning",loading:t.isLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.postApply.apply(void 0,arguments)}}},[t._v(t._s(t.app.langReplace("确认提交")))])],1)],1):t._e()},s=[]},f5ff:function(t,e,i){"use strict";i.r(e);var n=i("428e"),a=i("72b3");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("8ba8");var r,o=i("f0c5"),u=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"5323c6bf",null,!1,n["a"],r);e["default"]=u.exports}}]);