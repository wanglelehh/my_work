(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-flow-checkOut"],{"0aa3":function(t,e,s){"use strict";s.r(e);var i=s("eb1e"),a=s.n(i);for(var n in i)"default"!==n&&function(t){s.d(e,t,(function(){return i[t]}))}(n);e["default"]=a.a},2851:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"bonusSelect",props:{bonusSelectClass:{type:String,default:"none"},bonusList:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1,defaultColor:this.app.getColor(this),used_bonus_id:0,bonusMoney:-1}},methods:{toggleBonusSelect:function(){this.$emit("toggleBonusSelect",this.bonusMoney,this.used_bonus_id)},selectBonus:function(t){if(this.used_bonus_id=0,"b0"==t.detail.value)return this.bonusMoney=0,!1;for(var e=0;e<this.bonusList.able.length;e++)if("b"+this.bonusList.able[e].bonus_id===t.detail.value){this.bonusMoney=this.bonusList.able[e].type_money,this.used_bonus_id=this.bonusList.able[e].bonus_id;break}},stopPrevent:function(){}}};e.default=i},"29a3":function(t,e,s){"use strict";s.r(e);var i=s("2851"),a=s.n(i);for(var n in i)"default"!==n&&function(t){s.d(e,t,(function(){return i[t]}))}(n);e["default"]=a.a},"2e0f":function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return i}));var i={uIcon:s("c688").default},a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-uni-view",[t.cartList.length>0?s("v-uni-view",{staticClass:"page-body",class:[t.app.setCStyle()]},[t.addressData.address_id>0?s("v-uni-view",[s("v-uni-navigator",{staticClass:"address-section",attrs:{url:"/pages/member/address/list?source=1&from=shop"}},[s("v-uni-view",{staticClass:"address-content"},[s("u-icon",{staticClass:"ml20 mr20 base-color",attrs:{name:"map-fill",size:"42"}}),s("v-uni-view",{staticClass:"cen"},[s("v-uni-view",{staticClass:"top"},[s("v-uni-text",{staticClass:"name"},[t._v(t._s(t.addressData.consignee))]),s("v-uni-text",{staticClass:"mobile fs30 font-w600"},[t._v(t._s(t.addressData.mobile))])],1),s("v-uni-text",{staticClass:"address fs28"},[t._v(t._s(t.addressData.merger_name)+" "+t._s(t.addressData.address))])],1),s("u-icon",{staticClass:"arrow-right",attrs:{name:"arrow-right",color:"#333333",size:"20"}})],1)],1)],1):s("v-uni-view",[s("v-uni-navigator",{staticClass:"address-section",attrs:{url:"/pages/member/address/manage?source=1&from=shop"}},[s("v-uni-view",{staticClass:"empty-address"},[s("v-uni-view",{staticClass:"smll"},[s("u-icon",{staticClass:"ml20 mr20",attrs:{name:"/static/public/images/icon_live.png",size:"42"}}),s("v-uni-text",[t._v(t._s(t.app.langReplace("选择收货地址")))])],1),s("u-icon",{staticClass:"arrow-right",attrs:{name:"arrow-right",color:"#333333",size:"20"}})],1)],1)],1),s("v-uni-view",{staticClass:"goods-section"},t._l(t.cartList,(function(e,i){return s("v-uni-view",{key:e.rec_id,staticClass:"g-item"},[s("v-uni-image",{attrs:{src:t.baseUrl+e.pic}}),s("v-uni-view",{staticClass:"ml10 flex"},[s("v-uni-view",{staticClass:"flex_bd"},[s("v-uni-view",{staticClass:"goods_name"},[t._v(t._s(e.goods_name))]),s("v-uni-view",{staticClass:"color-cc fs26 mt20"},[t._v(t._s(e.sku_name))])],1),s("v-uni-view",{staticClass:"text-right price-box"},[s("v-uni-view",{staticClass:"price ff base-color"},[t._v(t._s(e.sale_price))]),e.use_integral>0?s("v-uni-view",{staticClass:"fs26 mt10 base-color"},[t._v("+"+t._s(e.use_integral)+t._s(t.app.langReplace("积分")))]):t._e(),s("v-uni-view",{staticClass:"fs30 mt10 color-99"},[t._v("x"+t._s(e.goods_number))])],1)],1)],1)})),1),s("v-uni-view",{staticClass:"yt-list"},[s("v-uni-view",{staticClass:"yt-list-cell"},[s("v-uni-text",{staticClass:"cell-tit clamp"},[t._v(t._s(t.app.langReplace("商品金额")))]),s("v-uni-text",{staticClass:"cell-tip ff base-color"},[t._v(t._s(t.goods_total))])],1),1==t.showBonus?s("v-uni-view",{staticClass:"yt-list",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggleBonusSelect()}}},[s("v-uni-view",{staticClass:"yt-list-cell",staticStyle:{padding:"0rpx"}},[s("v-uni-view",{staticClass:"cell-icon"},[t._v("券")]),s("v-uni-text",{staticClass:"cell-tit clamp "},[t._v(t._s(t.app.langReplace("优惠券")))]),t.bonusMoney>0?s("v-uni-view",[s("v-uni-text",{staticClass:"cell-tip ff base-color"},[t._v("- "+t._s(t.bonusMoney))])],1):s("v-uni-view",{staticClass:"cell-tip"},[s("v-uni-text",{staticClass:" color-99 fs30"},[t._v(t._s(t.bonusTip))]),s("u-icon",{staticClass:"arrow-right",attrs:{name:"arrow-right",color:"#999999",size:"22"}})],1)],1)],1):t._e(),s("v-uni-view",{staticClass:"yt-list-cell"},[s("v-uni-text",{staticClass:"cell-tit clamp"},[t._v(t._s(t.app.langReplace("运费")))]),0==t.shipping_fee_ing?s("v-uni-text",{staticClass:"cell-tip ff base-color"},[t._v(t._s(t.shipping_fee))]):s("v-uni-text",{staticClass:"cell-tip base-color"},[t._v(t._s(t.app.langReplace("运费计算中"))+"...")])],1),s("v-uni-view",{staticClass:"yt-list-cell desc-cell"},[s("v-uni-text",{staticClass:"cell-tit clamp"},[t._v(t._s(t.app.langReplace("备注")))]),s("v-uni-input",{staticClass:"desc",attrs:{type:"text",placeholder:t.app.langReplace("请输入备注内容"),"placeholder-class":"placeholder"},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}})],1)],1),s("v-uni-view",{staticClass:"footer"},[s("v-uni-view",{staticClass:"price-content base-color"},[s("v-uni-text",{staticClass:"fs28"},[t._v(t._s(t.app.langReplace("合计"))+":")]),s("v-uni-text",{staticClass:"price ff"},[t._v(t._s(t.order_total))]),t.integralTotal>0?s("v-uni-text",{staticClass:"fs30 ml10"},[t._v("+"+t._s(t.integralTotal)+t._s(t.app.langReplace("积分")))]):t._e()],1),s("v-uni-text",{staticClass:"submit primarybtn",attrs:{loading:t.isLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v(t._s(t.app.langReplace("确认提交")))])],1),s("bonusSelect",{attrs:{bonusSelectClass:t.bonusSelectClass,bonusList:t.bonusList},on:{toggleBonusSelect:function(e){arguments[0]=e=t.$handleEvent(e),t.toggleBonusSelect.apply(void 0,arguments)}}})],1):t._e()],1)},n=[]},"33fb":function(t,e,s){var i=s("c2e2");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=s("4f06").default;a("469bdac2",i,!0,{sourceMap:!1,shadowMode:!1})},"450f":function(t,e,s){"use strict";s.r(e);var i=s("2e0f"),a=s("0aa3");for(var n in a)"default"!==n&&function(t){s.d(e,t,(function(){return a[t]}))}(n);s("8687");var o,l=s("f0c5"),c=Object(l["a"])(a["default"],i["b"],i["c"],!1,null,"50c15df0",null,!1,i["a"],o);e["default"]=c.exports},5618:function(t,e,s){"use strict";var i;s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-uni-view",{staticClass:"popup ",class:t.bonusSelectClass,on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.stopPrevent.apply(void 0,arguments)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggleBonusSelect.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"mask"}),s("v-uni-view",{staticClass:"layer attr-content",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.stopPrevent.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"fs36 font-w700"},[t._v(t._s(t.app.langReplace("选择优惠券")))]),s("v-uni-radio-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.selectBonus.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"item mt20"},[s("v-uni-label",{staticClass:"flex"},[s("v-uni-view",{staticClass:"flex_bd left fs30 "},[t._v(t._s(t.app.langReplace("不使用优惠券")))]),s("v-uni-view",{staticClass:"right "},[s("v-uni-radio",{staticStyle:{transform:"scale(0.7)"},attrs:{value:"b0",color:t.defaultColor}})],1)],1)],1),s("v-uni-scroll-view",{staticClass:"selbonus_list mt20",attrs:{"scroll-y":!0}},[s("v-uni-view",{staticClass:"line_tip "},[s("v-uni-view",{staticClass:"line"}),s("v-uni-view",{staticClass:"tip"},[s("v-uni-text",[t._v(t._s(t.app.langReplace("可使用"))+"("+t._s(t.bonusList.ableNum)+")")])],1)],1),t._l(t.bonusList.able,(function(e,i){return s("v-uni-view",{key:e.bonus_id,staticClass:"item mt20"},[s("v-uni-label",{staticClass:"w100 flex"},[s("v-uni-view",{staticClass:"flex_bd"},[s("v-uni-view",{staticClass:"color-00 fs32 font-w700"},[s("v-uni-text",{staticClass:"color-66 fs28"},[t._v("￥")]),s("v-uni-text",{staticClass:"color-66 mr20"},[t._v(t._s(e.type_money))]),t._v(t._s(e.type_name))],1),s("v-uni-view",{staticClass:"fs26 mt5 color-cc"},[t._v(t._s(t.app.langReplace("满"))+"￥"+t._s(e.min_amount)+t._s(t.app.langReplace("可用")))]),s("v-uni-view",{staticClass:"fs26 mt5 color-cc"},[t._v(t._s(e._use_start_date)+"-"+t._s(e._use_end_date))])],1),s("v-uni-view",{staticClass:"right smll mr10"},[s("v-uni-radio",{staticStyle:{transform:"scale(0.7)"},attrs:{value:"b"+e.bonus_id,color:t.defaultColor}})],1)],1)],1)})),t.bonusList.ableNum<1?s("v-uni-view",{staticClass:"h100 smll"},[s("v-uni-view",{staticClass:"w100 text-center fs28 color-66"},[t._v("---"+t._s(t.app.langReplace("您没有可使用的优惠券"))+"---")])],1):t._e(),s("v-uni-view",{staticClass:"line_tip mt20"},[s("v-uni-view",{staticClass:"line"}),s("v-uni-view",{staticClass:"tip"},[s("v-uni-text",[t._v(t._s(t.app.langReplace("不可使用"))+"("+t._s(t.bonusList.unableNum)+")")])],1)],1),t._l(t.bonusList.unable,(function(e,i){return s("v-uni-view",{key:e.bonus_id,staticClass:"item mt20"},[s("v-uni-label",{staticClass:"w100 flex color-cc"},[s("v-uni-view",{staticClass:"flex_bd"},[s("v-uni-view",{staticClass:" fs32 font-w700"},[s("v-uni-text",{staticClass:" fs28"},[t._v("￥")]),s("v-uni-text",{staticClass:" mr20"},[t._v(t._s(e.type_money))]),t._v(t._s(e.type_name))],1),s("v-uni-view",{staticClass:"fs26 mt5 "},[t._v(t._s(t.app.langReplace("满"))+"￥"+t._s(e.min_amount)+t._s(t.app.langReplace("可用")))]),s("v-uni-view",{staticClass:"fs26 mt5 "},[t._v(t._s(e._use_start_date)+"-"+t._s(e._use_end_date))])],1)],1)],1)}))],2)],1),s("v-uni-view",{staticClass:"btn-box"},[s("v-uni-button",{staticClass:"btn primarybtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggleBonusSelect.apply(void 0,arguments)}}},[t._v(t._s(t.app.langReplace("完成")))])],1)],1)],1)},n=[]},"56af":function(t,e,s){"use strict";var i=s("33fb"),a=s.n(i);a.a},8687:function(t,e,s){"use strict";var i=s("a172"),a=s.n(i);a.a},a172:function(t,e,s){var i=s("aabe");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=s("4f06").default;a("7d4e06d8",i,!0,{sourceMap:!1,shadowMode:!1})},a1cb:function(t,e,s){"use strict";s.r(e);var i=s("5618"),a=s("29a3");for(var n in a)"default"!==n&&function(t){s.d(e,t,(function(){return a[t]}))}(n);s("56af");var o,l=s("f0c5"),c=Object(l["a"])(a["default"],i["b"],i["c"],!1,null,"a0992e7a",null,!1,i["a"],o);e["default"]=c.exports},aabe:function(t,e,s){var i=s("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */\r\n/* 页面左右间距 */\r\n/* 文字尺寸 */\r\n/* 边框颜色 */\r\n/* 图片加载中颜色 */\r\n/* 行为相关颜色 */\r\n/*文字颜色*/uni-page-body[data-v-50c15df0]{background:#f8f8f8;padding-bottom:%?100?%}.address-section[data-v-50c15df0]{padding:%?30?% 0;background:#fff;position:relative;margin:%?20?%;border-radius:10px}.address-section .empty-address[data-v-50c15df0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%;font-weight:600;padding:%?20?% 0}.address-section .address-content[data-v-50c15df0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.address-section .icon-shouhuodizhi[data-v-50c15df0]{-webkit-flex-shrink:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:%?90?%;color:#888;font-size:%?44?%}.address-section .cen[data-v-50c15df0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#333}.address-section .name[data-v-50c15df0]{font-size:%?30?%;margin-right:%?24?%}.address-section .address[data-v-50c15df0]{margin-top:%?16?%;margin-right:%?20?%;color:#999}.address-section .icon-you[data-v-50c15df0]{font-size:%?32?%;color:#999;margin-right:%?30?%}.address-section .arrow-right[data-v-50c15df0]{position:absolute;right:%?10?%;top:40%}.goods-section[data-v-50c15df0]{margin:%?20?%;border-radius:10px;background:#fff}.goods-section .g-header[data-v-50c15df0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?84?%;padding:0 %?30?%;position:relative}.goods-section .logo[data-v-50c15df0]{display:block;width:%?50?%;height:%?50?%;border-radius:100px}.goods-section .name[data-v-50c15df0]{font-size:%?30?%;color:#3b7bf6;margin-left:%?24?%}.goods-section .g-item[data-v-50c15df0]{display:-webkit-box;display:-webkit-flex;display:flex;padding:%?20?%}.goods-section .g-item uni-image[data-v-50c15df0]{-webkit-flex-shrink:0;flex-shrink:0;display:block;width:%?140?%;height:%?140?%;border-radius:%?10?%}.goods-section .g-item .goods_name[data-v-50c15df0]{display:block;font-size:%?28?%;color:#333;line-height:%?40?%;height:%?80?%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.goods-section .g-item .price-box[data-v-50c15df0]{font-size:%?40?%;color:#333;line-height:1}.goods-section .g-item .price-box .price[data-v-50c15df0]{font-size:%?40?%;line-height:1}.goods-section .g-item .price-box .price[data-v-50c15df0]:before{content:"￥";font-size:%?24?%}.goods-section .g-item .step-box[data-v-50c15df0]{position:relative}.yt-list[data-v-50c15df0]{margin:%?20?%;border-radius:10px;background:#fff}.yt-list-cell[data-v-50c15df0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?30?% %?20?%;position:relative}.yt-list-cell.cell-hover[data-v-50c15df0]{background:#fafafa}.yt-list-cell.b-b[data-v-50c15df0]:after{left:%?30?%}.yt-list-cell .cell-icon[data-v-50c15df0]{height:%?32?%;width:%?32?%;font-size:%?22?%;color:#fff;text-align:center;line-height:%?32?%;background:#f85e52;border-radius:%?4?%;margin-right:%?12?%}.yt-list-cell .cell-icon.hb[data-v-50c15df0]{background:#ffaa0e}.yt-list-cell .cell-icon.lpk[data-v-50c15df0]{background:#3ab54a}.yt-list-cell .cell-more[data-v-50c15df0]{-webkit-align-self:center;align-self:center;font-size:%?24?%;color:#999;margin-left:%?8?%;margin-right:%?-10?%}.yt-list-cell .cell-tit[data-v-50c15df0]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#333;margin-right:%?10?%}.yt-list-cell .cell-tip.disabled[data-v-50c15df0]{color:#999}.yt-list-cell .cell-tip.active[data-v-50c15df0]{color:#3b7bf6}.yt-list-cell .cell-tip.red[data-v-50c15df0]{color:#3b7bf6}.yt-list-cell.desc-cell .cell-tit[data-v-50c15df0]{max-width:%?120?%}.yt-list-cell .desc[data-v-50c15df0]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#333}.footer[data-v-50c15df0]{position:fixed;left:0;bottom:0;z-index:995;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%;height:%?98?%;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;font-size:%?30?%;background-color:#fff;z-index:998;color:#3b7bf6;padding:0 %?20?%}.footer .price-content[data-v-50c15df0]{padding-right:%?30?%}.footer .price-tip[data-v-50c15df0]{color:#fc4a5b;margin-left:%?8?%}.footer .price[data-v-50c15df0]{font-size:%?40?%}.footer .price[data-v-50c15df0]:before{content:"￥";font-size:%?24?%}.footer .submit[data-v-50c15df0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:%?200?%;height:%?70?%;color:#fff;border-radius:%?40?%;font-size:%?28?%}body.?%PAGE?%[data-v-50c15df0]{background:#f8f8f8}',""]),t.exports=e},c2e2:function(t,e,s){var i=s("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */\r\n/* 页面左右间距 */\r\n/* 文字尺寸 */\r\n/* 边框颜色 */\r\n/* 图片加载中颜色 */\r\n/* 行为相关颜色 */\r\n/*文字颜色*/.selbonus_list[data-v-a0992e7a]{height:%?600?%}.selbonus_list .item[data-v-a0992e7a]{width:100%;margin-top:%?10?%}.selbonus_list .item .right[data-v-a0992e7a]{width:%?50?%}.selbonus_list .line_tip[data-v-a0992e7a]{position:relative;padding:%?20?% %?0?%}.selbonus_list .line_tip .line[data-v-a0992e7a]{border-top:%?1?% #ccc dotted}.selbonus_list .line_tip .tip[data-v-a0992e7a]{position:absolute;top:%?0?%;padding:%?0?% %?20?%;text-align:center;width:100%}.selbonus_list .line_tip .tip uni-text[data-v-a0992e7a]{background-color:#fff;color:#999;font-size:%?26?%}',""]),t.exports=e},eb1e:function(t,e,s){"use strict";var i=s("4ea4");s("4160"),s("b680"),s("b64b"),s("acd8"),s("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s("96cf");var a=i(s("1da1")),n=i(s("a1cb")),o={components:{bonusSelect:n.default},data:function(){return{shipping_fee_ing:1,setting:{},baseUrl:this.config.baseUrl,isLoading:!1,desc:"",address_id:0,addressData:{},recids:"",cartList:[],goods_total:0,shipping_fee:0,order_total:0,integralTotal:0,bonusSelectClass:"none",used_bonus_id:0,showBonus:!1,bonusList:{},bonusMoney:0,bonusTip:this.app.langReplace("选择优惠券")}},onLoad:function(t){var e=this.app.langReplace("结算页");uni.setNavigationBarTitle({title:e}),this.app.isLogin(this),this.setting=uni.getStorageSync("setting"),this.recids=t.recids,this.getAddress(),this.loadData(),this.getBonusList()},onShow:function(){},methods:{loadData:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$u.post("shop/api.flow/getList",{is_sel:1,recids:t.recids}).then((function(e){if(e.data.goodsList.length<1)return uni.showModal({title:t.app.langReplace("提示"),content:t.app.langReplace("请选择下单商品."),confirmText:t.app.langReplace("确认"),showCancel:!1,success:function(t){t.confirm&&this.app.goPage(-1)}}),!1;var s=[],i=e.data.goodsList;Object.keys(i).forEach((function(t){s.push(i[t])})),t.cartList=s,t.integralTotal=e.data.integralTotal,t.calcTotal()}));case 1:case"end":return e.stop()}}),e)})))()},getAddress:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=uni.getStorageSync("address_id"),t.$u.post("member/api.address/getAddress",{address_id:s}).then((function(e){t.addressData=e.data,t.addressData.address_id>0?t.address_id=t.addressData.address_id:t.address_id=0,t.evalShippingFee()}));case 2:case"end":return e.stop()}}),e)})))()},evalShippingFee:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s={},s.address_id=t.address_id,s.recids=t.recids,t.shipping_fee_ing=1,t.$u.post("shop/api.flow/evalShippingFee",s).then((function(e){t.shipping_fee_ing=0,t.shipping_fee=e.data.shippingFee.shipping_fee,t.supplyerShippingFee=e.data.shippingFee.supplyerShippingFee,t.calcTotal()}));case 5:case"end":return e.stop()}}),e)})))()},calcTotal:function(){var t=0;this.cartList.forEach((function(e){t+=e.sale_price*e.goods_number})),this.goods_total=t.toFixed(2),t=parseFloat(t)-parseFloat(this.bonusMoney)+parseFloat(this.shipping_fee),this.order_total=t.toFixed(2)},getBonusList:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.setting.sys_model_shop_bonus){e.next=3;break}return t.showBonus=!1,e.abrupt("return",!1);case 3:t.showBonus=!0,s={},s.goods_type=1,s.recids=t.recids,t.$u.post("shop/api.bonus/getBonusListToCheckout",s).then((function(e){t.bonusList=e.data}));case 8:case"end":return e.stop()}}),e)})))()},toggleBonusSelect:function(t,e){var s=this;this.used_bonus_id=0,"show"===this.bonusSelectClass?(0==t?(this.bonusTip=this.app.langReplace("不使用优惠券"),this.bonusMoney=0):t>0&&(this.bonusTip=" - "+t,this.bonusMoney=t,this.used_bonus_id=e),this.bonusSelectClass="hide",setTimeout((function(){s.bonusSelectClass="none"}),250),this.calcTotal()):"none"===this.bonusSelectClass&&(this.bonusSelectClass="show")},submit:function(){var t=this;if(1==this.isLoading)return!1;var e={};if(this.address_id<1)return uni.showToast({title:this.app.langReplace("请选择收货地址"),duration:2e3,icon:"none"}),!1;e.address_id=this.address_id,e.is_select=1,e.recids=this.recids,e.buy_msg=this.desc,e.used_bonus_id=this.used_bonus_id,this.isLoading=!0,this.$u.post("shop/api.flow/addOrder",e).then((function(t){var e=t.data.order_id;uni.redirectTo({url:"/pages/shop/order/pay?order_id=".concat(e)})})).catch((function(e){t.isLoading=!1}))},stopPrevent:function(){}}};e.default=o}}]);