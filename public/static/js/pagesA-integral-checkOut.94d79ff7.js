(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-integral-checkOut"],{"0070":function(e,t,a){"use strict";var i=a("448a"),s=a.n(i);s.a},"15b5":function(e,t,a){"use strict";a.r(t);var i=a("e678"),s=a("ffb5");for(var n in s)"default"!==n&&function(e){a.d(t,e,(function(){return s[e]}))}(n);a("0070");var l,r=a("f0c5"),o=Object(r["a"])(s["default"],i["b"],i["c"],!1,null,"f44a9a94",null,!1,i["a"],l);t["default"]=o.exports},"2fd7":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */\r\n/* 页面左右间距 */\r\n/* 文字尺寸 */\r\n/* 边框颜色 */\r\n/* 图片加载中颜色 */\r\n/* 行为相关颜色 */\r\n/*文字颜色*/uni-page-body[data-v-f44a9a94]{background:#f8f8f8;padding-bottom:%?100?%}.address-section[data-v-f44a9a94]{padding:%?30?% 0;background:#fff;position:relative;margin:%?20?%;border-radius:10px}.address-section .empty-address[data-v-f44a9a94]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%;font-weight:600;padding:%?20?% 0}.address-section .address-content[data-v-f44a9a94]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.address-section .icon-shouhuodizhi[data-v-f44a9a94]{-webkit-flex-shrink:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:%?90?%;color:#888;font-size:%?44?%}.address-section .cen[data-v-f44a9a94]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#333}.address-section .name[data-v-f44a9a94]{font-size:%?30?%;margin-right:%?24?%}.address-section .address[data-v-f44a9a94]{margin-top:%?16?%;margin-right:%?20?%;color:#999}.address-section .icon-you[data-v-f44a9a94]{font-size:%?32?%;color:#999;margin-right:%?30?%}.address-section .arrow-right[data-v-f44a9a94]{position:absolute;right:%?10?%;top:40%}.goods-section[data-v-f44a9a94]{margin:%?20?%;border-radius:10px;background:#fff}.goods-section .g-header[data-v-f44a9a94]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?84?%;padding:0 %?30?%;position:relative}.goods-section .logo[data-v-f44a9a94]{display:block;width:%?50?%;height:%?50?%;border-radius:100px}.goods-section .name[data-v-f44a9a94]{font-size:%?30?%;color:#3b7bf6;margin-left:%?24?%}.goods-section .g-item[data-v-f44a9a94]{display:-webkit-box;display:-webkit-flex;display:flex;padding:%?20?%}.goods-section .g-item uni-image[data-v-f44a9a94]{-webkit-flex-shrink:0;flex-shrink:0;display:block;width:%?140?%;height:%?140?%;border-radius:%?10?%}.goods-section .g-item .goods_name[data-v-f44a9a94]{display:block;font-size:%?28?%;color:#333;line-height:%?40?%;height:%?80?%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.goods-section .g-item .price-box[data-v-f44a9a94]{font-size:%?40?%;color:#333;line-height:1}.goods-section .g-item .step-box[data-v-f44a9a94]{position:relative}.price[data-v-f44a9a94]{font-size:%?40?%;line-height:1}.yt-list[data-v-f44a9a94]{margin:%?20?%;border-radius:10px;background:#fff}.yt-list-cell[data-v-f44a9a94]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?30?% %?20?%;position:relative}.yt-list-cell.cell-hover[data-v-f44a9a94]{background:#fafafa}.yt-list-cell.b-b[data-v-f44a9a94]:after{left:%?30?%}.yt-list-cell .cell-icon[data-v-f44a9a94]{height:%?32?%;width:%?32?%;font-size:%?22?%;color:#fff;text-align:center;line-height:%?32?%;background:#f85e52;border-radius:%?4?%;margin-right:%?12?%}.yt-list-cell .cell-icon.hb[data-v-f44a9a94]{background:#ffaa0e}.yt-list-cell .cell-icon.lpk[data-v-f44a9a94]{background:#3ab54a}.yt-list-cell .cell-more[data-v-f44a9a94]{-webkit-align-self:center;align-self:center;font-size:%?24?%;color:#999;margin-left:%?8?%;margin-right:%?-10?%}.yt-list-cell .cell-tit[data-v-f44a9a94]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#333;margin-right:%?10?%}.yt-list-cell .cell-tip.disabled[data-v-f44a9a94]{color:#999}.yt-list-cell .cell-tip.active[data-v-f44a9a94]{color:#3b7bf6}.yt-list-cell .cell-tip.red[data-v-f44a9a94]{color:#3b7bf6}.yt-list-cell.desc-cell .cell-tit[data-v-f44a9a94]{max-width:%?120?%}.yt-list-cell .desc[data-v-f44a9a94]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#333}.footer[data-v-f44a9a94]{position:fixed;left:0;bottom:0;z-index:995;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%;height:%?98?%;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;font-size:%?30?%;background-color:#fff;z-index:998;color:#3b7bf6;padding:0 %?20?%}.footer .price-content[data-v-f44a9a94]{padding-right:%?30?%}.footer .price-tip[data-v-f44a9a94]{color:#fc4a5b;margin-left:%?8?%}.footer .price[data-v-f44a9a94]{font-size:%?40?%}.footer .price[data-v-f44a9a94]:before{content:"￥";font-size:%?24?%}.footer .submit[data-v-f44a9a94]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:%?200?%;height:%?70?%;color:#fff;border-radius:%?40?%;font-size:%?28?%}body.?%PAGE?%[data-v-f44a9a94]{background:#f8f8f8}',""]),e.exports=t},"448a":function(e,t,a){var i=a("2fd7");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("4f06").default;s("6c5778ba",i,!0,{sourceMap:!1,shadowMode:!1})},6431:function(e,t,a){"use strict";var i=a("4ea4");a("4160"),a("b680"),a("b64b"),a("acd8"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var s=i(a("1da1")),n={data:function(){return{shipping_fee_ing:1,setting:{},baseUrl:this.config.baseUrl,isLoading:!1,desc:"",address_id:0,addressData:{},recids:"",cartList:[],goods_total:0,shipping_fee:0,order_total:0,integralTotal:0}},onLoad:function(e){this.app.isLogin(this);var t=this.app.langReplace("积分结算");uni.setNavigationBarTitle({title:t}),this.setting=uni.getStorageSync("setting"),this.recids=e.recids,this.getAddress(),this.loadData()},onShow:function(){},methods:{loadData:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$u.post("integral/api.flow/getList",{is_sel:1,recids:e.recids}).then((function(t){if(t.data.goodsList.length<1)return uni.showModal({title:e.app.langReplace("提示"),content:e.app.langReplace("请选择兑换商品"),confirmText:e.app.langReplace("确认"),showCancel:!1,success:function(e){e.confirm&&uni.navigateBack()}}),!1;var a=[],i=t.data.goodsList;Object.keys(i).forEach((function(e){a.push(i[e])})),e.cartList=a,e.integralTotal=t.data.integralTotal,e.calcTotal()}));case 1:case"end":return t.stop()}}),t)})))()},getAddress:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=uni.getStorageSync("address_id"),e.$u.post("member/api.address/getAddress",{address_id:a}).then((function(t){e.addressData=t.data,e.addressData.address_id>0?e.address_id=e.addressData.address_id:e.address_id=0,e.evalShippingFee()}));case 2:case"end":return t.stop()}}),t)})))()},evalShippingFee:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={},a.address_id=e.address_id,a.recids=e.recids,e.shipping_fee_ing=1,e.$u.post("integral/api.flow/evalShippingFee",a).then((function(t){e.shipping_fee_ing=0,e.shipping_fee=t.data.shippingFee.shipping_fee,e.supplyerShippingFee=t.data.shippingFee.supplyerShippingFee,e.calcTotal()}));case 5:case"end":return t.stop()}}),t)})))()},calcTotal:function(){var e=0;this.cartList.forEach((function(t){e+=t.sale_price*t.goods_number})),this.goods_total=e.toFixed(2),e=parseFloat(e)-parseFloat(this.shipping_fee),this.order_total=e.toFixed(2)},submit:function(){var e=this;if(1==this.isLoading)return!1;var t={};if(this.address_id<1)return uni.showToast({title:this.app.langReplace("请选择收货地址"),duration:2e3,icon:"none"}),!1;t.address_id=this.address_id,t.is_select=1,t.recids=this.recids,t.buy_msg=this.desc,this.isLoading=!0,this.$u.post("integral/api.flow/addOrder",t).then((function(e){var t=e.data.order_id;0==e.data.is_pay?uni.redirectTo({url:"/pages/shop/order/info?order_id=".concat(t)}):uni.redirectTo({url:"/pages/shop/order/pay?order_id=".concat(t)})})).catch((function(t){e.isLoading=!1}))},stopPrevent:function(){}}};t.default=n},e678:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}));var i={uIcon:a("c688").default},s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.cartList.length>0?a("v-uni-view",{staticClass:"page-body",class:[e.app.setCStyle()]},[e.addressData.address_id>0?a("v-uni-view",[a("v-uni-navigator",{staticClass:"address-section",attrs:{url:"/pages/member/address/list?source=1&from=shop"}},[a("v-uni-view",{staticClass:"address-content"},[a("u-icon",{staticClass:"ml20 mr20 base-color",attrs:{name:"map-fill",size:"42"}}),a("v-uni-view",{staticClass:"cen"},[a("v-uni-view",{staticClass:"top"},[a("v-uni-text",{staticClass:"name"},[e._v(e._s(e.addressData.consignee))]),a("v-uni-text",{staticClass:"mobile fs30 font-w600"},[e._v(e._s(e.addressData.mobile))])],1),a("v-uni-text",{staticClass:"address fs28"},[e._v(e._s(e.addressData.merger_name)+" "+e._s(e.addressData.address))])],1),a("u-icon",{staticClass:"arrow-right",attrs:{name:"arrow-right",color:"#333333",size:"20"}})],1)],1)],1):a("v-uni-view",[a("v-uni-navigator",{staticClass:"address-section",attrs:{url:"/pages/member/address/manage?source=1&from=shop"}},[a("v-uni-view",{staticClass:"empty-address"},[a("v-uni-view",{staticClass:"smll"},[a("u-icon",{staticClass:"ml20 mr20",attrs:{name:"/static/public/images/icon_live.png",size:"42"}}),a("v-uni-text",[e._v("选择收货地址")])],1),a("u-icon",{staticClass:"arrow-right",attrs:{name:"arrow-right",color:"#333333",size:"20"}})],1)],1)],1),a("v-uni-view",{staticClass:"goods-section"},e._l(e.cartList,(function(t,i){return a("v-uni-view",{key:t.rec_id,staticClass:"g-item"},[a("v-uni-image",{attrs:{src:e.baseUrl+t.pic}}),a("v-uni-view",{staticClass:"ml10 flex"},[a("v-uni-view",{staticClass:"flex_bd"},[a("v-uni-view",{staticClass:"goods_name"},[e._v(e._s(t.goods_name))]),a("v-uni-view",{staticClass:"color-cc fs26 mt20"},[e._v(e._s(t.sku_name))])],1),a("v-uni-view",{staticClass:"text-right price-box"},[a("v-uni-view",{staticClass:"price ff base-color"},[e._v(e._s(t.use_integral)),a("v-uni-text",{staticClass:"fs24"},[e._v(e._s(e.app.langReplace("积分")))])],1),a("v-uni-view",{staticClass:"fs30 mt10 color-99"},[e._v("x"+e._s(t.goods_number))])],1)],1)],1)})),1),a("v-uni-view",{staticClass:"yt-list"},[a("v-uni-view",{staticClass:"yt-list-cell"},[a("v-uni-text",{staticClass:"cell-tit clamp"},[e._v(e._s(e.app.langReplace("抵扣积分")))]),a("v-uni-view",{staticClass:"cell-tip ff base-color price"},[e._v(e._s(e.integralTotal)),a("v-uni-text",{staticClass:"fs24"},[e._v(e._s(e.app.langReplace("积分")))])],1)],1),a("v-uni-view",{staticClass:"yt-list-cell"},[a("v-uni-text",{staticClass:"cell-tit clamp"},[e._v(e._s(e.app.langReplace("运费")))]),0==e.shipping_fee_ing?a("v-uni-text",{staticClass:"cell-tip ff base-color"},[e._v("￥"+e._s(e.shipping_fee))]):a("v-uni-text",{staticClass:"cell-tip base-color"},[e._v(e._s(e.app.langReplace("运费计算中"))+"...")])],1),a("v-uni-view",{staticClass:"yt-list-cell desc-cell"},[a("v-uni-text",{staticClass:"cell-tit clamp"},[e._v(e._s(e.app.langReplace("备注")))]),a("v-uni-input",{staticClass:"desc",attrs:{type:"text",placeholder:e.app.langReplace("请输入备注内容"),"placeholder-class":"placeholder"},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}})],1)],1),a("v-uni-view",{staticClass:"footer"},[a("v-uni-view",{staticClass:"base-color"},[e._v(e._s(e.app.langReplace("合计"))+":")]),a("v-uni-view",{staticClass:"price-content base-color flex"},[a("v-uni-view",{staticClass:" ff"},[e._v(e._s(e.integralTotal)),a("v-uni-text",{staticClass:"fs24"},[e._v(e._s(e.app.langReplace("积分")))])],1),e.shipping_fee>0?a("v-uni-view",{staticClass:"fs30 ml10"},[e._v("+￥"+e._s(e.shipping_fee)+e._s(e.app.langReplace("运费")))]):e._e()],1),a("v-uni-text",{staticClass:"submit primarybtn",attrs:{loading:e.isLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v(e._s(e.app.langReplace("确认提交")))])],1)],1):e._e()},n=[]},ffb5:function(e,t,a){"use strict";a.r(t);var i=a("6431"),s=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a}}]);